ANSIBLE
=======

Syntax:
=======
	ansible --version|--help
	ansible [-i INVENTORY] [-v] --list-hosts HOST_PATTERN
	ansible [-i INVENTORY] HOST_PATTERN [-m MODULE] {-a "<ARGS>..."} [-b] [-k] [-u REMOTE_USER] \
		[--become-method su|sudo|enable|runas] [-K] [--become-user USER] [-f FORKS] [-v] \
		[-e <VAR>=<VALUE>]...
	
		Eg. ansible -i myinventory servera -m yum -a "name=httpd state=latest"

	
	ansible-playbook [-i INVENTORY] [-b] [-k] [-u REMOTE_USER] \
		[--become-method su|sudo|enable|runas] [-K] [--become-user USER] [-f FORKS] \
		[-v] [--syntax-check] [-C] [--list-tasks] [-e <VAR>=<VALUE>]... PLAYBOOK

	ansible-inventory [-i INVENTORY] [--graph|--list] [-y]

	ansible-doc [-t TYPE] -l|MODULE_NAME
	
		Eg. ansible-doc -t connection -l
		    ansible-doc -t callback -l
		    ansible-doc yum

	ansible-vault create|edit|encrypt|decrypt|view|rekey [--vault-password-file PASSFILE] FILENAME

	ansible-galaxy init|install ROLE_NAME

Config
======
	Precedence
	----------
	1. ANSIBLE_CONFIG 			# environment variable, file name anything ref by var.
	2. ./ansible.cfg			# current directory, file name ansible.cfg
	3. ~/.ansible.cfg			# home directory, file name .ansible.cfg
	4. /etc/ansible/ansible.cfg		# default

	ansible.cfg
	-----------
	[defaults]
	inventory         = <PATH>
	remote_user       = devops
	ask_pass          = true|False
	host_key_checking = True|false
	gathering         = Implicit|true|false|explicit
	forks             = FORK

	[privilege_escalation]
	become          = true|False
	become_user     = root
	become_ask_pass = true|False
	become_method   = su|sudo|enable|runas	# *nix - su,sudo; win - runas; ntdev - enable

Variables - Scope & precedence
==============================
	      Precedence                        Scope                          Validity
	      ----------                        -----                          --------
	GLOBAL                                                                 per playbook
	      - Cmd line options (-e)           PLAYBOOK
	      - Config                          PLAYBOOK
	PLAYBOOK                                                               per play
	      - include_vars module in tasks    PLAY (from the module declaration onwards)
	      - vars under tasks                TASK
	      - vars_files under play           PLAY
	      - vars under play                 PLAY
	HOST                                                                   per host
	      - host_vars in project            PLAYBOOK
	      - group_vars in project           PLAYBOOK
	      - host_var in inventory           PLAYBOOK
	      - group_vars in inventory         PLAYBOOK
	
	Where SCOPE,
	  PLAYBOOK = variables can be used anywhere in Playbook
	  PLAY     = variables can only be used in PLAY where it is declared
	  TASK     = variables can only be used in the TASK where it is declared

Magic Variables
===============
	inventory_hostname	# the inventory host name
	group_names		# groups the inventory host belong to
	groups			# all groups of the inventory as well as their members
	hostvars		# all inventory variables

		Eg.
		Assuming you're inside servera now, to refer to it's own groups magic var:
			hostvars.servera.groups OR
			hostvars['servera'].['groups'] OR
			groups
		Structure of hostvars is as below:

		hostvars:
			servera:
				inventory_hostname: servera	# each host has it's magic var
				group_names:
					- webservers
					- nodes
				groups:
					all:
						- monkey
						- servera
						- serverb
					nodes:
						- servera
						- serverb
					webservers:
						- servera
					dbservers:
						- serverb
					ungrouped:
						- monkey
				ansible_facts: {}
			serverb:
				inventory_hostname: serverb
				...
	
	

